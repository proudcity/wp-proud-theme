// So widget layout

$widget-margin: 15px;

.panel-grid-cell {
  .so-panel {
    margin-bottom: $widget-margin !important;

    &:last-child {
      margin-bottom: 0 !important;
    }
  }

  // Full width style pages (front page)
  &:only-child {
    .so-panel {
      margin-bottom: $widget-margin * 2 !important;

      &:last-child {
        margin-bottom: 0 !important;
      }
    }
  }
}

.panel-grid-cell .so-panel.margin-bottom-none {
  margin-bottom: 0!important;
}

.panel-grid-cell .so-panel.margin-bottom-large {
  margin-bottom: ($widget-margin*2)!important;
}

.panel-grid-cell .so-panel.margin-bottom-huge {
  margin-bottom: ($widget-margin*3)!important;
}

.panel-grid-cell .so-panel.margin-top {
  margin-top: $widget-margin;
}

.panel-grid-cell .so-panel.margin-top-none {
  margin-top: 0;
}

.panel-grid-cell .so-panel.margin-top-large {
  margin-top: ($widget-margin*2);
}

.panel-grid-cell .so-panel.margin-top-huge {
  margin-top: ($widget-margin*3);
}

// Full width / contrained in Site origins
.panel-grid {
  margin-bottom: 0!important;

  // Add padding to grids after title row
  + .panel-grid > .container {
    padding-bottom: $page-section-spacing;
  }
}

// Force additional padding
.panel-row-multiple {
  margin-left: -$grid-gutter-width/2!important;
  margin-right: -$grid-gutter-width/2!important;

  .panel-grid-cell {
    padding-left: $grid-gutter-width/2!important;
    padding-right: $grid-gutter-width/2!important;

    > .widget > .proud-widget-title {
      margin-top: 0;
    }
  }
}

// Fix for agency subpages done in panels
.wrap.container {
  .panel-grid>.container {
    width: auto !important;
  }
}

// Fix for pages on mobile
@include respond($sm-up) {
  //.wrap.container {
  //  .panel-grid {
  //    margin-left: 0!important;
  //    margin-right: 0!important;
  //
  //    >.container {
  //      &, & >.panel-grid-cell {
  //        padding-left: 0!important;
  //        padding-right: 0!important;
  //      }
  //    }
  //  }
  //}

  // Force additional padding
  .panel-row-multiple {

    .container {
      padding-left: 0!important;
      padding-right: 0!important;
    }

    //.panel-grid-cell:first-child {
    //  padding-left: 3px !important;
    //}
    //
    //.panel-grid-cell:last-child {
    //  padding-right: 3px !important;
    //}

    .panel-grid-cell:only-child {
      padding-left: $grid-gutter-width/2 !important;
      padding-right: $grid-gutter-width/2 !important;
    }
  }
}

// full width pages
.full-width-container {
  overflow: hidden;

  .jsn-bootstrap3 {

    // Full width
    .wr_fullwidth {
      padding-left: 0!important;
      padding-right: 0!important;
      margin-left: -($grid-gutter-width/2)!important;
      margin-right: -($grid-gutter-width/2)!important;
      width: auto!important;
      min-width: 100%;
    }

    & > .row:not(.wr_fullwidth) {
      margin-right: auto;
      margin-left: auto;
      @include clearfix;

      // Container widths
      //
      @media (min-width: $screen-sm-min) {
        width: $container-sm - ($grid-gutter-width/2);
      }
      @media (min-width: $screen-md-min) {
        width: $container-md - ($grid-gutter-width/2);
      }
      @media (min-width: $screen-lg-min) {
        width: $container-lg - ($grid-gutter-width/2);
      }
    }

    &:last-child {
      & > .row:not(.wr_fullwidth) {
        padding-bottom: $line-height-computed*2!important;
      }
    }
  }
}

body.siteorigin-panels-before-js .siteorigin-panels-stretch[data-stretch-type],
.siteorigin-panels-stretch[data-stretch-type] {
  padding-left: 0!important;
  padding-right: 0!important;

  .panel-grid-cell {
    padding-left: 0!important;
    padding-right: 0!important;
  }
}

@media screen and (min-width: 781px) {
  body.siteorigin-panels-before-js .siteorigin-panels-stretch[data-stretch-type],
  .siteorigin-panels-stretch[data-stretch-type] {
    margin-left: $grid-gutter-width/2!important;
    margin-right: $grid-gutter-width/2!important;
  }
}

// Card columns in SO don't need a margin
.panel-grid .card-columns {
  margin-bottom: 0;
}

// Emulated gallery widget

/*--------------------------------------------------------------
## Galleries
--------------------------------------------------------------*/
.gallery {
  margin-left: -5px;
  margin-right: -5px;
}
.gallery-item {
  display: inline-block;
  text-align: center;
  vertical-align: top;
  width: 100%;
  padding: 0 5px;
  margin-bottom: 10px;

}
.gallery-columns-2 .gallery-item {
  max-width: 50%;
}
.gallery-columns-3 .gallery-item {
  max-width: 33.33%;
}
.gallery-columns-4 .gallery-item {
  max-width: 25%;
}
.gallery-columns-5 .gallery-item {
  max-width: 20%;
}
.gallery-columns-6 .gallery-item {
  max-width: 16.66%;
}
.gallery-columns-7 .gallery-item {
  max-width: 14.28%;
}
.gallery-columns-8 .gallery-item {
  max-width: 12.5%;
}
.gallery-columns-9 .gallery-item {
  max-width: 11.11%;
}
.gallery-caption {
  display: block;
}